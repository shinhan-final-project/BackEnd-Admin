    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:th="http://www.thymeleaf.org"
          xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    >
    <head>
        <meta charset="UTF-8">
        <title>login page</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    </head>
    <body>
    <div sec:authorize="hasRole('UNAPPROVED')">아무런 권한이 없습니다. 관리자가 승인해줄 때까지 기다려주세요.</div>

    <!--ADMIN 화면-->
    <div sec:authorize="hasRole('ADMIN')">ADMIN 권한이 있습니다.
        <div id="myDiv"></div>
        <style>
            select {
                width: 300px;
                height: 30px;
            }
        </style>
        <script th:inline="javascript">
            $(document).ready(() => {
                $.get("/api/admin/term", (data) => {
                    let select = $("<select></select>");
                    select.append($("<option selected disabled>문제를 만들고 싶은 주식 용어 선택</option>"));
                    $.each(data, (index, term) => {
                        select.append($("<option></option>")
                            .attr("value", term.id) // 각 옵션의 값 설정
                            .attr("title", term.description)
                            .text(term.term)); // 각 옵션의 표시 텍스트 설정
                    });
                    select.attr("id", "mySelect"); // select 요소에 ID 추가
                    $("body").append(select);
                    $("#mySelect").select2(); // select2 라이브러리를 사용하여 검색 기능 추가
                    $("#mySelect").on("change", function () {
                        const selectedValue = $(this).val();
                        const selectedOption = $(this).find("option:selected");
                        const titleValue = selectedOption.attr("title");

                        $("#myDiv").empty();
                        const myDiv = $("#myDiv");
                        const descriptionInput = $("<input type='text' placeholder='설명을 입력하세요'>");
                        myDiv.append(descriptionInput);

                        for (let i = 1; i <= 3; i++) {
                            const optionInput = $(`<input type='text' placeholder='보기 ${i}를 입력하세요'>`);
                            const isCorrectCheckbox = $(`<input type='checkbox' id='correctOption${i}'>`);
                            myDiv.append(optionInput);
                            myDiv.append(isCorrectCheckbox);
                            myDiv.append($("<label></label>").attr("for", `correctOption${i}`).text("정답"));
                        }
                        myDiv.append($("<b>한국 예탁 결제원의 설명 : </b><p>" + titleValue + "</p>"));
                        $("body").append(myDiv);
                    });
                });
            });
        </script>

    </div>


    <!--관리자 화면-->
    <div sec:authorize="hasRole('MANAGER')">
        <button id="fetchData">관리자 요청 보낸 인원 보기</button>

        <div id="tableContainer">
            <!-- JSON 데이터가 여기에 표시될 것입니다 -->
        </div>

        <button id="approveButton" style="display: none;">승인하기</button>
        <button id="refuseButton" style="display: none;">거절하기</button>
        <script th:inline="javascript">
            $(document).ready(() => {
                $('#fetchData').click(() => {
                    $.get("/api/manager/wait-list", (data) => {
                        let table = '<table><thead><tr><th>ID</th><th>Name</th><th>Department</th><th>Select</th></tr></thead><tbody>';
                        /* JSON 데이터를 테이블로 변환 */
                        $.each(data,(index, item) => {
                            table += '<tr>'
                                + '<td>' + item.name + '</td>'
                                + '<td>' + item.department + '</td>'
                                + '<td><input type="checkbox" name="selectedItems" value="' + item.id + '"></td>'
                                + '</tr>';
                        });
                        table += '</tbody></table>';
                        $('#tableContainer').html(table);
                    });
                });

                // 체크박스가 변경되면 처리하는 이벤트 리스너
                $('#tableContainer').on('change', 'input[type="checkbox"]', () => {
                    if ($('input[name="selectedItems"]:checked').length > 0) {
                        $('#approveButton').show();
                        $('#refuseButton').show();
                    } else {
                        $('#approveButton').hide();
                        $('#refuseButton').hide();
                    }
                });
                // "승인하기" 버튼 클릭 이벤트
                $('#approveButton').click(()=>{
                    let selectedIds = $('input[name="selectedItems"]:checked').map((index, element) => {
                        return $(element).val();
                    }).get();

                    $.ajax({
                        type: "POST",
                        url: "/api/manager/approve",
                        contentType: "application/json",
                        data: JSON.stringify(selectedIds),
                        success: (response) =>{
                            console.log("성공:", response);
                            location.reload();
                        },
                        error: (jqXHR, textStatus, errorThrown) => {
                            console.log("오류:", errorThrown);
                        }
                    });
                });
                $('#refuseButton').click(()=>{
                    let selectedIds = $('input[name="selectedItems"]:checked').map((index, element) => {
                        return $(element).val();
                    }).get();

                    $.ajax({
                        type: "DELETE",
                        url: "/api/manager/refuse",
                        contentType: "application/json",
                        data: JSON.stringify(selectedIds),
                        success: (response) =>{
                            console.log("성공:", response);
                            location.reload();
                        },
                        error: (jqXHR, textStatus, errorThrown) => {
                            console.log("오류:", errorThrown);
                        }
                    });
                });
            });
        </script>
    </div>
    <button id="logout" th:onclick="|location.href='@{/logout}'|">로그아웃</button>
    </body>
    </html>
